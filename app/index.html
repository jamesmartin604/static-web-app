<!DOCTYPE html>
<html lang ="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content ="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <title>Vanilla JavaScript App</title>
    </head>

    <body>
        <main>
            <h1>Vanilla JS App</h1>
            <p>Loading content from the API: <b id="name">...</b></p>
        </main>

        <script>
        async function getMessages() {
            const res = await fetch('/api/messages');
            return await res.json();
        }

        async function createMessage(text) {
            const res = await fetch('/api/messages', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text })
            });
            return await res.json();
        }

        async function show() {
            const msgs = await getMessages();
            document.querySelector('#name').textContent = msgs.length ? msgs[0].text : "No messages yet";

            // create a new message for demo
            const newMsg = await createMessage("Hello from CRUD!");
            console.log("Created:", newMsg);
        }

        show();
        </script>

    </body>
</html>